<%= simple_form_for [:my, @book, memo], remote: true do |f| %>
  <%= f.input :body, label: false, input_html: {rows: 20} %>
  <%= f.input :public, label: 'Do you want to share this memo with the public?' %>

  <%= f.error :segments %>
  <div id="segments">
    <%= f.simple_fields_for :segments do |r| %>
      <%= render "/my/memos/segment_fields", f: r %>
    <% end %>
    <div class="links">
      <%= link_to_add_association 'add new segment', f, :segments, partial: "/my/memos/segment_fields", class: "btn btn-success btn-sm" %>
    </div>
  </div>
  <br>
  <div>
    <%= f.submit data: {disable_with: "submitting..."}, class: "btn btn-primary" %>
  </div>
<% end %>

<%= memo.errors.full_messages.join(", ") %>
<br>
