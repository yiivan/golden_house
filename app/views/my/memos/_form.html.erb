<%= simple_form_for [:my, @book, memo], remote: true do |f| %>
  <%= f.input :body, label: "Memo", input_html: {id: "fr-editor"} %>

  <%= f.error :segments %>
  <div class="segments">
    <%= f.simple_fields_for :segments do |r| %>
      <%= render "/my/memos/segment_fields", f: r %>
    <% end %>
    <div class="add-new-segment">
      <%= link_to_add_association 'add new segment', f, :segments, partial: "/my/memos/segment_fields", class: "btn btn-success btn-sm" %>
    </div>
  </div>

  <div class="public-checkbox">
    <%= f.input :public, label: "Do you want to share this memo with the public?" %>
  </div>

  <div class="create-memo-button">
    <%= f.submit data: {disable_with: "submitting..."}, class: "btn btn-primary" %>
  </div>
<% end %>

<%= memo.errors.full_messages.join(", ") %>
<br>
